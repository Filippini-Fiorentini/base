%\documentclass[pt11,a4paper,twoside,reqno,openright]{paper}
%\usepackage[latin1]{inputenc}
%\usepackage{amsmath}
%\usepackage{amsfonts}
%\usepackage{amssymb}
%\usepackage[english]{babel}
%\usepackage{subfigure}
%\usepackage{graphicx}
%\usepackage{float}
%\usepackage{listings,lstautogobble}
%\usepackage[T1]{fontenc}

%\begin{document}

%\noindent {\huge \textbf{Cooperative2}}

%!TeX root = ./GameTheoryNotes.tex

\bigskip
\noindent \textbf{/*}
	
\bigskip
\noindent \textbf{Revision of the last lecture}

\noindent In a TU game, to say that the value of coalition $\{1,2\}$ is 10 
means that the best value players 1 and 2 can get when they play alone is 10. 
They are called transferrable because player1 and 2 can decide how to share 
this value among them.

\noindent The game is described by a vector space, which has dimension $2^n-1$, 
where the $-1$ is due to the fact that the value of the empty set is zero (I actually have $2^n-1$ free parameters).

\noindent There exists a canonical basis, whose number of elements is the 
number of coalitions.

\noindent "Unanimity games": all the players in a winning coalition are 
necessary and sufficient.

\noindent "Additive games": $v(A \cup B) = v(A)+v(B)$. When I make the union of 
two coalitions, the value of the resulting coalition is the sum of the values 
of the two coalitions $\implies$ being together is neautral: it does not give 
neither an advantage nor a disadvantage.

\noindent "Superadditive games": to form any coalition it always convenient.  

\noindent "Convex games": they enforce the condition of superadditivity, because 
we do not ask the coalitions to be disjoint. Convex $\implies$ superadditive.

\noindent "Simple games": we're not interested in the values of the coalitions, 
but we only divide them in "winning coalitions" and "losing coalitions". We 
assume that there are no players which are harmful to other players: we can add 
any player to a winning coalition and it remains winning $\implies$ we are 
interested in the minimal winning coalitions.

\noindent In particular, unanimity games are simple games in which the minimal 
winning coalition is unique. In turn, weighted majority game are games in which 
there may exist more than one minimal winning coalition.

\noindent "Solution vector": a vector of utilities. 

\noindent "Solution concept": it assigns 
a bunch (a set) of possibile utilities to the game. Remember that in the 
solution concept the coalitions disappear: utilities are assigned to the single 
players, not to the coalitions. Indeed, the players participate to the game, 
but they are egoistic: they want to know what THEY would get from the game.

\noindent The first idea of solution is the imputation set. Idea: we want to have a solution to whom no player would object

%\noindent {\huge min 30 circa: la stessa cosa che non ho capito nella 
%lezione del 31...vediamo se qui Ã¨ meglio XD}

\noindent Idea of the core: we want to have a solution to whom no coalition would object.

\bigskip
\noindent \textbf{*/}

\subsubsection{Structure of the core}

\noindent If it is not empty, the core is a polytope: indeed, it is generated by 
a finite number of inequalities (which is precisely the definition of polytope).

\noindent For additive games, the core is given by $C(v)~=~[v(1),v(2)...v(n)]$. 
Indeed, when we define the core we want to have 
$\sum_{i \in S}{v(i)} \geq v(S)$, but actually, by definition of additive 
games, this relation holds with the equality.

\subsubsection{Core in simple games}

\noindent \textbf{Veto player:} in a game $v$, a player $i$ is a veto player if $v(A) = 0 ~\forall A \subset N$ s.t. $i \notin A$.

\bigskip
\noindent A veto player is someone which is essential to approve something. In 
particolar, a coalition is losing whenever it does not contain the veto player, 
while in general it is not true that a coalition for sure wins if the veto 
player is present (the veto player is necessary but not sufficient).

\bigskip
\noindent \textbf{Theorem:} let $v$ be a simple game. Then $C(v) \neq \emptyset$ iff there exists at least one veto player.

\noindent If a veto player exists, $C(v)$ is the closed, convex polytope with extrema in the points $(0,...,0,1,0...,0)$, where the value 1 is assigned to the position of the veto player.

\bigskip
\noindent \textbf{Proof:} first of all, I prove that if there is 
no veto player, then the core is empty, i.e. $N\setminus\{i\}$ is a winning coalition 
$\forall i$ (otherwise $i$ would be a veto player).

\noindent Suppose $(x_1,...,x_n) \in C(v)$ s.t. 
\[(1) \hspace{1cm} \sum_{j \neq i}{x_j} = 1 ~\forall i=1:n\]

\noindent (1) with $\geq~\implies$ I need to give at least 1 to all the 
coalitions which exclude $i$.

\noindent We compute $\sum_{i=1}^n$ of the inequality (1) and we get:
\[
	\sum_{j=1}^n{x_j} \geq \frac{n}{n-1}
\]
which is impossible since the sum at the lhs is actually 1.

\noindent In turn, suppose that there exists a veto player $i$. We claim that 
$(0,...,1,0...,0) \in C(v)$, where we have 1 in position $i$. We have to prove 
that $\sum_{j \in S}{x_j} \geq v(S)$. In particular, $v(S)=0$ if $S$ is not 
winning (and the former inequality is trivial). $v(S)=1$ if $S$ is winning, 
which means that $S$ contains the veto player. But then the sum at lhs is 1.

\noindent For each veto player, $(0,0,...,1,0,...,0)$ belongs to the core. But 
the core is convex, which means that all the convex combinations of $e_i$ 
belong to the core $\implies$ not all the distributions which belong to the 
core are fair, in the sense that they give a symmetric outcome to symmetric 
players (for example, two veto players have no symmetric result if we consider 
either $(1,0)$ or $(0,1)$: one gets all and the other nothing). On the other 
hand, if two players are symmetric, for sure the core contains a symmetric 
solution (in the previous example, $(\frac{1}{2},\frac{1}{2})$). 

\subsubsection{Core in convex games}

\noindent \textbf{Proposition:} if $v$ is a convex game, $C(v) \neq \emptyset$.

\bigskip
\noindent \textbf{Proof:} it can be checked that the vector $(x_1,...,x_n)$, where $x_1 = v(\{1\})$ and $x_i = v(\{1,...,i\}) - v(\{1,...,i-1\})$, is in the core of $v$.

\subsubsection{Nonemptyness of the core}

\noindent Given a game $v$, consider the Linear Programming problem
\[
	\min{\sum_{i=1}^{n}{x_i}} ~\text{where}~ \sum_{i \in S}{x_i} \geq v(S) ~\forall S \subseteq N
\]

\bigskip
\noindent \textbf{Theorem:} this LP problem has always a nonempty set of solutions $C$. The core $C(v)$ is nonempty iff the optimal value of the LP is $v(N)$; in this case, $C(v) = C$.

\bigskip
\noindent \textbf{Remark:} in general, the optimal value of the LP is $V \geq v(N)$ because of the efficiency constraint, which entails, if we consider $S$ equal to the grand coalition, $\sum_{i=1}^{n}{x_i} \geq v(N)$.

\bigskip
\noindent \textbf{Note:} there is no feasibility constraint: I do not have 
any condition "sum equal to $v(N)$".

\noindent Of course, the fact that I have no constraints on the budget guarantees that I always have a solution: I can for sure make all the coalitions happy. $\implies$ $C$ is nonempty and unbounded.

\bigskip
\noindent The point is: consider a function $f:X \rightarrow \mathbb{R}$. How do I prove that 
$f$ admits a minimum? Consider the sequence $\{x_n\}$ s.t. $f(x_n) \rightarrow 
\inf{f}$. Notice that I need no assumptions for this: the sequence exists for sure by definition of inf.

\noindent Now you can suppose $x_n \rightarrow x_0$, at least up to a subsequence. If $f$ is continuous, $f(x_n) \rightarrow f(x_0)$.

\noindent But we also have  $f(x_n) \rightarrow \inf{f}$, which means that it must be $f(x_0) = \inf{f}$: I found a minimum point.

\noindent This is the proof of Weierstrass theorem.

\noindent But how can I prove that the sequence admits a convergent subsequence? In finite dimension, the best is to prove that it is bounded, and indeed Weierstrass theorem shows that, if $f$ is continuous on a bounded set, it admits a minimum.

\noindent In our problem, the set is unbounded. However, think about a minimizing sequence: it is made by vectors s.t. they are lower bounded (efficiency condition) and the sum of $x_i$ is bounded (feasibility). $\implies$ each element is bounded $\implies$ the sequence is bounded $\implies$ I can pass to the limit $\implies$ I always have a nonempty set of solutions $C \neq \emptyset$.

\bigskip
\noindent Since the problem has for sure a nonempty set of solutions, I know that it has a value $v$. Now I have two possibilities:
\begin{enumerate}
\item $v > v(N)$, which implies that the core is empty: iot make all the 
coalitions happy, we would have to spend more than $v(N)$, i.e. more than what 
we have, which is not possible.
\item $v=v(N)$, which implies that the core coincides with $C$. Note that $C$ 
is always not empty, but that $C$ is actually the core iff its value is 
feasible. 
\end{enumerate}

\noindent Equivalent formulation in terms of linear programming problem: there 
is a LP problem which has always solution; the core is empty if the solution is 
$>v(N)$ and it is $C$ if the solution is $v(N)$.

\bigskip
\noindent \textbf{Dual formulation - He loves this teorem}

\noindent Having an LP problem, we want to dualize it.

\bigskip
\noindent \textbf{Theorem:} $C(v) \neq \emptyset$ iff all vectors $(\lambda_S)_{S \subseteq N}$ s.t. $\lambda_S \geq 0 ~\forall S \subseteq N$ satisfy also
\begin{enumerate}
	\item $\sum_{S: i \in S \subseteq N}{\lambda_S} = 1$
	\item $\sum_{S \subseteq N}{\lambda_Sv(S)} \leq v(N)$
\end{enumerate}

\bigskip
\noindent Condition (1) tells that, supposing you are player1, the sum of all 
the coalitions containing you is 1 $\implies$ you can interpret $\lambda_S$ as 
the quota, the percentage it is assigned to you in the coalition $S$. What is 
important is that if, in the coalition $\{1,2\}$, the percentage assigned to 
player1 is $\frac{1}{2}$, then the same must hold for player2: 
$\lambda_{\{1,2\}}$ does not depend on your name, but only on the 
coalition you belong to.

\bigskip
\noindent Condition (2) tells that we need to consider the weighted average of all the possible coalition and that we define the weigths in such a way that the coalitions have a quoted representation of the players. This means that in any way we weight, the sum must be $\leq v(N)$, i.e. $v(N)$ must be big enough to allow me to make all the coalitions happy.

\noindent It must be possible to assign a weight to all the coalitions in a feasible way.

\bigskip
\noindent \textbf{Proof:} the LP problem associated to the core problem has the following matrix form:
\begin{equation*}
	\begin{cases}
		\min<c,x>:\\
		Ax \geq b
	\end{cases}
\end{equation*}
where $c = 1_n$, $b = (v(\{1\}), ..., v(\{1,2\}), ..., v(N))$ (it represents the game) and $A \in \mathbb{R}^{(2^n-1) \times n}$ and it is s.t. all elements are either zero or one and $A_{ij} = 1$ if the player $j$ belongs to the coalition $S_i$ (example: consider a three players game; the first coalition is $S_1 = \{1\}$ and therefore the first row of the matrix is $[1,0,0]$ because only the first player belongs to $S_1$).

\noindent The dual of the problem has the form
\begin{equation*}
	\begin{cases}
		\max\left(\sum_{S \subseteq N}\lambda_Sv(S)\right)\\
		\lambda_S \geq 0\\
		\sum_{S: i \in S \subseteq N}\lambda_S = 1 ~\forall i=1:n
	\end{cases}
\end{equation*} 
Since LP has a solution, the fundamental duality theorem says that also the dual must have a solution and there is no duality gap. $\implies$ the core $C(v)$ is nonempty iff the value of the dual problem is s.t. $V \leq v(N)$.

\bigskip
\noindent \textbf{Notes:}
\noindent The number of variables is equal to the number of coalitions.

\noindent In the dual, I put the equality and not the inequality because in the 
primal problem I do not have nonnegativity constraints.

\bigskip
\noindent \textbf{Example:}

\noindent Matrix $A$ for the three players game:\\
1	0	0\\
0	1	0\\
0	0	1\\
1	1	0\\
1	0	1\\
0	1	1\\
1	1	1\\

\noindent Transposed matrix:\\
1	0	0	1	1	0	1\\
0	1	0	1	0	1	1\\
0	0	1	0	1	1	1\\

\bigskip
\noindent \textbf{Definition:} a family $(S_1,...,S_m)$ of coalitions is called \textbf{balanced} if there exists  $\lambda = (\lambda_1,...\lambda_m)$, called \textbf{balancing vector}, s.t. $\lambda_i > 0 ~\forall i=1:m$ and $\sum_{k: i \in S_k}\lambda_k = 1 ~\forall i \in N$.

\bigskip
\noindent \textbf{Examples:}
\begin{enumerate}
\item A partition is a balancing family because all the players belong to 
one and only one subset (coalition) and therefore every player is fully 
represented by this coalition ($\lambda$ is made by only ones).
\item $|N| = 4; S_1 = \{1,2\}, S_2 = \{1,3\}, S_3 = \{2,3\}, S_4 = \{4\}$. All the players but one belong to two coalitions; the 
last player belongs to only one coalition. $\implies$ the family is balanced by $\lambda = \left[\frac{1}{2},\frac{1}{2},\frac{1}{2},1\right]$, which means that player1 is half represented by $S_1$ and half by $S_2$, while, for example, player4 is fully represented by $S_4$.
\item All the players are present in one coalition (the one formed only by themselves) and in the grand coalition. 
They can give whatever value $p$ to the single-player coalitions and $1-p$ to the grand coalition, assuming that they are represented at the $p\%$ by the coalition in which they are alone and at the $(100-p)\%$ by the grand coalition.
\item \textbf{counterexample:} the family $(\{1,2\},\{1,3\},\{3\})$ is not balanced because player2 is present only in $S_1$, which means that it must be $\lambda_1 = 1$. However, if $\lambda_1$ were 1, player1 would not be represented at all by coalition $S_2$, while indeed he is (remember that player1 $\in S_1$ and $\in S_2$ which means that it must be $\lambda_1 + \lambda_2 = 1$).
\end{enumerate}

\bigskip
\noindent \textbf{Remark:} the positive coefficients of the vector $\lambda = (\lambda_S)_{S \subseteq N}$ fulfilling the constraints of the dual LP problem are balancing vectors for a balanced family.

\bigskip
\noindent \textbf{Minimal balanced family:} is a balanced falmily s.t. no subfamilies are balanced.

\bigskip
\noindent Any partition of $N$ is a minimal balanced family: if I trash one set, some players are not represented by any coalition.

\bigskip
\noindent Example (3) above is not a minimal balancing family: for 
example, we can delete the grand coalition and we still have a balancing 
family because we have a partition; on the other hand, we can erase $\{1\}, 
\{2\},\{3\}$ and we still have a balancing family: we are in a comunist 
regime and all the players are fully represented by the estate.

\bigskip
\noindent \textbf{Lemma:} a balanced falmily is minimal iff its balancing vector is unique.

\bigskip
\noindent \textbf{Theorem:} the positive coefficients of the extreme points of the constraint set
\begin{equation*}
	\begin{cases}
		\lambda_S \geq 0\\
		\sum_{S: i \in S \subseteq N}\lambda_S = 1 ~\forall i \in N
	\end{cases}
\end{equation*}
are the balancing vector of the minimal balanced coalitions.

\bigskip
\noindent Iot have the extreme points, we only need to find the minimal 
balanced coalitions.

\bigskip
\noindent \textbf{Remarks:} 
\begin{itemize}
	\item all the partitions of $N$ (mutually disjoint coalitions) are minimal balanced families. The condition 
	\[
		\sum_{S \subseteq N}\lambda_Sv(S) \leq v(N)
	\]
	is automatically fulfilled if the game is superadditive (by definition of superadditivity).
	
	\item there are superadditive games s.t. $C(v) = \emptyset$.
	
	\item there are non-superadditive games s.t. $C(v) \neq \emptyset$.
\end{itemize}

\subsection{Excess}

\noindent Consider a TU game.

\bigskip
\noindent \textbf{Excess:} the excess of a coalition $A$ over the assigned imputation $x$ is given by
\[
	e(A,x) = v(A) - \sum_{i \in A}x_i
\]
It is a measure of the dissatisfaction of the coalition.

\bigskip
\noindent \textbf{Remark:} an imputation $x$ belongs to $C(v)$ iff $e(A,x) \leq 0 ~\forall A \subseteq N$.

\subsection{Nucleolus}

\noindent \textbf{Definition:} The \textbf{lexicographic vector} attached to an imputation $x$ is $\theta(x) = (\theta_1(x),...,\theta_1{2^n-1}(x))$ s.t. $\theta_i(x) = e(A_i,x)$ for the coalition $A_i \subseteq N$ and $\theta_1(x) \geq ... \geq \theta_{2^n-1}(x)$.

\bigskip
\noindent \textbf{Nucleolus:} the nucleolus solution is the solution $\nu: \mathcal{G}(N) \rightarrow \mathbb{R}^n$ s.t. $\nu(v)$ is the set of the imputations $x$ s.t. $\theta(x) \leq_L \theta(y)$ for all imputations $y$ of the game $v$ (:it is the set of the imputations that minimize the maximum dissatisfaction of the coalitions).

\bigskip
\noindent \textbf{Theorem:} for every game $v$ s.t. the imputation set is not empty, the nucleolus is a singleton (:a precise vector of utilities).\\
$\implies$\\
The nucleolus is called \textbf{one point solution}.

\bigskip
\noindent \textbf{Proposition:} if $C(v) \neq \emptyset$, then $\nu(v) \in C(v)$.

\bigskip
\noindent \textbf{Proof:} consider $x \in C(v)$. Then $\theta(x) \leq 0$ because no coalition in the core complains. Since the nucleolus is lexicographically inferior (:it minimizes the maximum dissatisfaction), we have $\theta(\nu(v)) \leq_L \theta(x) \leq 0$ and therefore $\theta(\nu(v)) \leq 0$, which means that $\nu(v) \in C(v)$.

%\end{document}
